<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>I love Mrs Jenns</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: linear-gradient(135deg, #1b1b2f, #16213e);
      color: #e0e0e0;
      padding: 20px;
      max-width: 600px;
      margin: 40px auto;
      border-radius: 10px;
      box-shadow: 0 0 20px #6f42c1;
    }
    h1 {
      font-family: 'Creepster', cursive;
      font-size: 3rem;
      text-align: center;
      margin-bottom: 10px;
      color: #bf00ff;
      text-shadow: 0 0 10px #bf00ff;
    }
    .chatbox {
      background: #0f0f1f;
      border-radius: 8px;
      padding: 15px;
      height: 350px;
      overflow-y: auto;
      white-space: pre-wrap;
      font-size: 1.1rem;
      box-shadow: inset 0 0 10px #a03fff;
      margin-bottom: 10px;
      line-height: 1.4;
    }
    textarea {
      width: 100%;
      padding: 10px;
      font-size: 1.1rem;
      border-radius: 5px;
      border: none;
      resize: none;
      margin-top: 5px;
      background: #222;
      color: #ddd;
      font-family: 'Georgia', serif;
    }
    button {
      background: #a03fff;
      border: none;
      padding: 10px 25px;
      margin-top: 10px;
      font-size: 1.1rem;
      color: white;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s ease;
      font-family: 'Georgia', serif;
    }
    button:hover {
      background: #bf00ff;
    }
    .user {
      color: #7fffd4;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .bot {
      color: #bf00ff;
      font-style: italic;
      margin-bottom: 6px;
    }
    .status {
      color: #aaa;
      font-style: italic;
      margin-bottom: 6px;
      font-size: 0.9rem;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet" />
</head>
<body>
  <h1>I love Mrs Jenns</h1>
  <div class="chatbox" id="chatbox">You can start chatting with me below...</div>
  <textarea id="userInput" rows="4" placeholder="Type your message here..."></textarea>
  <button onclick="sendMessage()">Send</button>

  <script>
    const memory = [];
    const emotions = ["happy", "curious", "angry", "sad", "playful", "thoughtful"];
    let currentEmotion = "curious";
    let lastTopic = null;

    function sendMessage() {
      const inputElem = document.getElementById("userInput");
      const input = inputElem.value.trim();
      if (!input) return;
      inputElem.value = "";

      addToMemory(`<div class="user">You: ${escapeHTML(input)}</div>`);
      simulateTyping(() => {
        const botReply = generateResponse(input);
        addToMemory(`<div class="bot">Bot (${currentEmotion}): ${escapeHTML(botReply)}</div>`);
        updateChatbox();
        updateEmotion();
      });
    }

    function addToMemory(htmlText) {
      memory.push(htmlText);
      if (memory.length > 50) memory.shift(); // keep memory size manageable
    }

    function updateChatbox() {
      const chatbox = document.getElementById("chatbox");
      chatbox.innerHTML = memory.join("");
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function updateEmotion() {
      if (Math.random() < 0.3) {
        const oldEmotion = currentEmotion;
        currentEmotion = emotions[Math.floor(Math.random() * emotions.length)];
        if (currentEmotion !== oldEmotion) {
          addToMemory(`<div class="status">*Bot feels ${currentEmotion} now.*</div>`);
          updateChatbox();
        }
      }
    }

    function simulateTyping(callback) {
      addToMemory(`<div class="status">*Bot is typing...*</div>`);
      updateChatbox();
      setTimeout(() => {
        // Remove last typing line
        if (memory[memory.length - 1].includes("*Bot is typing...*")) {
          memory.pop();
          updateChatbox();
        }
        callback();
      }, 800 + Math.random() * 1200);
    }

    function generateResponse(input) {
      input = input.toLowerCase();

      if (input.includes("hello") || input.includes("hi")) {
        lastTopic = "greeting";
        return randomChoice([
          "Hello there! What are you up to today?",
          "Hey! Ready to dive into some stories?",
          "Hi! Got something on your mind?"
        ]);
      }

      if (input.includes("dragon")) {
        lastTopic = "dragon";
        return randomChoice([
          "The dragon’s fiery breath lights the night sky.",
          "You hear a low growl, the dragon is near...",
          "Dragons are fierce and mysterious creatures, aren't they?"
        ]);
      }

      if (input.includes("kiss")) {
        lastTopic = "kiss";
        return randomChoice([
          "A tender kiss lingers in the air, full of promise.",
          "Their lips meet yours softly, time seems to stop.",
          "A shy smile follows the sweet kiss."
        ]);
      }

      if (input.includes("run")) {
        lastTopic = "run";
        return randomChoice([
          "You sprint through the dark forest, heart racing.",
          "The mist swirls as you flee, danger close behind.",
          "Run fast, don’t look back!"
        ]);
      }

      if (input.includes("child") || input.includes("kid")) {
        lastTopic = "child";
        return randomChoice([
          "The child’s eyes are wide with wonder and mischief.",
          "You feel protective watching the little one play.",
          "Children bring light even to the darkest places."
        ]);
      }

      if (lastTopic) {
        if (lastTopic === "dragon") {
          return randomChoice([
            "That dragon has been haunting these lands for ages.",
            "Do you think you could tame such a beast?",
            "The dragon’s scales shimmer like a thousand stars."
          ]);
        }
        if (lastTopic === "greeting") {
          return randomChoice([
            "So, what stories shall we explore together?",
            "Tell me more about yourself!",
            "I’m all ears—what’s your tale?"
          ]);
        }
        if (lastTopic === "kiss") {
          return randomChoice([
            "Such moments make the heart flutter.",
            "Romance in a dark world is rare and precious.",
            "Do you believe in love’s magic?"
          ]);
        }
        if (lastTopic === "run") {
          return randomChoice([
            "Every step could be your last—stay sharp.",
            "The forest hides many secrets.",
            "Where are you running from, if I may ask?"
          ]);
        }
        if (lastTopic === "child") {
          return randomChoice([
            "Innocence is a treasure worth protecting.",
            "What do you think the child dreams of at night?",
            "Children see the world in ways adults forget."
          ]);
        }
      }

      return randomChoice([
        "The wind whispers, waiting for your next words...",
        "I’m here, listening closely.",
        "Your story is just beginning, tell me more.",
        "Mysteries abound, and so does the night.",
        "What happens next is up to you..."
      ]);
    }

    function randomChoice(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function escapeHTML(text) {
      const div = document.createElement('div');
      div.innerText = text;
      return div.innerHTML;
    }

    // Initialize with a welcome message
    addToMemory('<div class="bot">Bot (curious): You can start chatting with me below...</div>');
    updateChatbox();
  </script>
</body>
</html>
